# =================================================================
# Annotex - Exam Answer Evaluation Service
# =================================================================
# Copy this file to .env and fill in your values
# Never commit .env to version control!
# =================================================================


# =================================================================
# Application Configuration
# =================================================================

APP_NAME=Annotex
APP_VERSION=1.0.0
DEBUG=false
ENVIRONMENT=development

# API prefix for all endpoints
API_V1_PREFIX=/api/v1


# =================================================================
# Database Configuration (PostgreSQL)
# =================================================================
# Format: postgresql+asyncpg://username:password@host:port/database
# For Docker: use 'db' as host (service name)
# For local: use 'localhost'

DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/annotation_db


# =================================================================
# Redis Configuration (Celery Queue)
# =================================================================
# Used for background job processing (OCR, evaluation, PDF rendering)
# For Docker: use 'redis' as host (service name)
# For local: use 'localhost'

REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1


# =================================================================
# File Storage Configuration
# =================================================================
# Supported backends: 'local' or 's3'
# Files stored: model answers, student submissions, annotated PDFs

STORAGE_BACKEND=local
STORAGE_BASE_PATH=./storage

# S3 Storage (Optional - for production)
# Uncomment and fill these for AWS S3 storage
# S3_BUCKET_NAME=your-bucket-name
# S3_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key


# =================================================================
# Google Cloud Vision OCR Configuration
# =================================================================
# Used for extracting text from PDF answer sheets
#
# Setup:
# 1. Go to https://console.cloud.google.com
# 2. Create project → Enable "Cloud Vision API"
# 3. IAM → Service Accounts → Create → Download JSON key
# 4. Save JSON file and set path below
#
# Supported providers: 'mock' (testing) or 'google_vision' (production)

OCR_PROVIDER=mock

# For production, uncomment and configure:
# OCR_PROVIDER=google_vision

# Option 1: Path to service account JSON file
# GOOGLE_CLOUD_CREDENTIALS_PATH=/path/to/service-account-key.json

# Option 2: Standard Google Cloud SDK environment variable
# GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# Option 3: Base64 encoded service account key (useful for containerized deployments)
# GOOGLE_SERVICE_ACCOUNT_KEY_BASE64=base64_encoded_service_account_key


# =================================================================
# Evaluation Configuration
# =================================================================
# Thresholds for verdict determination based on semantic similarity
#
# | Verdict   | Score Range    | Annotation Color |
# |-----------|----------------|------------------|
# | correct   | >= 0.75        | Green            |
# | partial   | 0.50 - 0.75    | Yellow           |
# | incorrect | < 0.50         | Red              |

CORRECT_THRESHOLD=0.75
PARTIAL_THRESHOLD=0.50

# Sentence Transformer model for semantic similarity
# Default: all-MiniLM-L6-v2 (fast, good quality)
# Alternative: all-mpnet-base-v2 (slower, higher quality)
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2


# =================================================================
# Logging Configuration
# =================================================================
# LOG_LEVEL: DEBUG, INFO, WARNING, ERROR, CRITICAL
# LOG_FORMAT: 'json' (structured) or 'text' (human-readable)

LOG_LEVEL=INFO
LOG_FORMAT=json


# =================================================================
# Important Security Notes
# =================================================================
# 1. NEVER commit .env file to version control
# 2. Keep service account keys private
# 3. Use strong passwords for database
# 4. Rotate API keys regularly
# 5. In production, use secrets management (Vault, AWS Secrets Manager)
# =================================================================
